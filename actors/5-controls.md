TODO *Замена ссылок, чтобы они вели на страницы **этого** сайта.*

Видели нашу статью о [Геймпадах/Внешних контроллерах](http://www.stencyl.com/help/view/gamepads)FIXME? Теперь, начиная с Stencyl 3.2, мы поддерживаем работу и с ними.

## Клавиатура (Элементы Управления)

Обнаружение ввода с клавиатуры в Stencyl работает по другому, чем это делается в других системах. Мы используем понятие Control _(Элемент Управления)_, чтобы сделать ваше управление с клавиатуры **гибким** и **его можно было легко переназначить.**

Элемент Управления - просто имя, которое принадлежит действию или “кнопке”, допустим на контроллере.

Например, если мы разрабатывали схему управления для игры Марио, это будет выглядеть так.

![](http://static.stencyl.com/pedia2/ch3/controls/image05.png)

### Настройка Управления в Stencyl
Та же идея относится к Stencyl, через страницу Controls _(Управление)_. Чтобы установить управление, нажмите кнопку Settings _(Настройки)_, показанную ниже, тогда откроется диалоговое окно.

![](http://static.stencyl.com/help/images/Settings-Button-New.png)


Затем, нажмите кнопку Controls _(Управление)_, чтобы просмотреть панель Controls. Оттуда, вы называете имя Элемента Управления и кнопки, к которому оно привязано.

![](http://static.stencyl.com/help/images/Settings-Controls.png)


Теперь, когда вы проверяете, нажата ли клавиша, отпущена или зажата, вместо того, чтобы проверить напрямую определенную клавишу (такую как клавиша "Пробел"), вы проверяете состояние Элемента Управления.

![](http://static.stencyl.com/pedia2/ch3/controls/image00.png)


### Почему вы не можете просто напрямую задать клавишу?

- Что, если вы решите изменить схему своего управления? Вам нужно было бы изменить ее везде.
- Что делать, если вы хотите, чтобы ваша схема управления настраивалась? Это был бы беспорядок. С Элементами Управления, вам просто изменить то, какая клавиша привязана к управлению.

<div class="note">
**Примечание:** Чтобы уменьшить количество настроек, все игры Stencyl создаются с, предварительно настроенным по умолчанию, набором средств управления. Вы можете свободно редактировать их, удалить их, и т.д.
</div>

## Мышь

Ввод мыши распознается через 3 различных состояния.

- Pressed _(Нажато)_
- Released _(Отпущено)_
- Down _(Зажато)_

**Нажато** и **Отпущено** одноразовые “события” - они **стреляют один раз за действие,** тогда как “зажато” постоянное состояние, которое может быть проверено.

<div class="note">
Так же, нажатие и отпускание клавиши мыши можно обнаружить используя событие Click *(Клик)* (в Add Event > Input *(Добавить Событие > Ввод)*)
</div>

## Положение мыши

Также вы можете захватить (x, y) расположение мыши на экране или любых недавних нажатий/отпусканий.

![](http://static.stencyl.com/pedia2/ch3/controls/mouse-position.png)

## Мышь на Актере

Ввод мыши на актере точно также включает 4 различных состояния.

- Pressed on Actor _(Нажато на актера)_
- Released on Actor _(Отпущено на актере)_
- Down on Actor _(Зажато на актере)_
- Over Actor _(Над актером)_

Над Актером - наш термин для **парения** мыши над актером.

![](http://static.stencyl.com/pedia2/ch3/controls/mouse-actor.png)

<div class="note">
Нажатие и отпускание клавиши мыши на актере можно обнаружить с помощью события On Actor *(На Актере)* (в Add Event > Input *(Добавить Событие > Ввод)*)
</div>

## Курсор

Иногда, вы хотите скрыть курсор или вывести на экран пользовательский курсор. Как это сделать?

Чтобы показать или скрыть курсор, используйте этот блок.

![](http://static.stencyl.com/pedia2/ch3/controls/hide-cursor.png)

<div class="note">
**Мини-Задача:** Как бы вы создали пользовательский курсор? Один метод: скрыть курсор и создать фиктивного актера, который все время следует за мышью, но ни с чем не сталкивается.
</div>

## Мобильные элементы управления

Начиная с Stencyl 3, ввод мыши эквивалентен (единственному) сенсорному вводу. Вы больше не должны использовать отдельные сенсорные блоки для этого. Читайте нашу статью о [Тач](http://www.stencyl.com/help/view/mobile-input/) FIXME для получения дальнейшей информации и примеров.

Другие темы мобильного ввода затронуты отдельно.

- [Акселерометр](http://www.stencyl.com/help/view/mobile-accelerometer/)FIXME
- [Виртуальный джойстик](http://www.stencyl.com/help/view/mobile-joystick/)FIXME

## Пример: Движение в 4-х Направлениях

Этот пример показывает, простой метод использования средств управления Клавиатурой.

Вверх / вниз / влево / вправо пред-определеные элементы управления, которые создаются с каждой игрой - они не должны быть перепутаны с фактическими, буквенными клавишами с теми же именами.

![](http://static.stencyl.com/pedia2/ch3/controls/image06.png)

<div class="note">
**Примечание:** это простое упражнение, чтобы познакомить вас с блоками. Мы уже [добавили](docs/logic/our_behaviors) в Stencyl поведение движения в 4-х направлениях, если оно вам нужно.
</div>

### Мини-Задание

- Один недостаток этого простого подхода - это то, что вы можете идти по диагонали. Как бы вы исправили это?
- В этой версии игрок сразу останавливается после того, как вы отпускаете клавишу. Реализуйте версию, где игрок постепенно замедляется.

## Пример: ввод текста

Иногда вход для игрока не ограничен определенным набором клавиш, а скорее игрок должен иметь возможность ввести произвольный текст. Например...
- когда вы хотите, чтобы игрок ввел свое имя
- или, одним словом, игру, где игрок должен ввести буквы.

Чтобы сделать это, вы можете использовать событие "**when any key is pressed/released**" *(когда любая клавиша нажата/отпущена).* Вот короткий пример поведения, которое принимает ввод от пользователя и помещает его в атрибут текста.

![](http://static.stencyl.com/pedia2/ch3/controls/key-input-example.png)

### Пояснения:
- Событие инициировано, когда любая клавиша нажата или отпущена соответственно.
- "Текстовый" блок выводит символ, который был сгенерирован событием.
- Например если игрок нажимает клавишу А, генерируется символ "a".
- Блок также принимает во внимание модифицирующие клавиши, таким образом нажатие A с зажатой клавише SHIFT, генерирует символ верхнего регистра "A".
- Нажатие Enter добавлет новую строку, а нажатие клавиши Backspace удалит последний знак. Далее мы объясним эту часть.

### Глюк: Специальные Клавиши (ENTER, BACKSPACE)
Некоторые клавиши не генерируют символ, например клавиша ENTER или клавиша BACKSPACE. Чтобы проверить, была ли такая клавиша нажата, используйте блок "**key code**" *(код клавиши)*, который выводит уникальное число для каждой клавиши на клавиатуре.

Для самых важных ключей сравните "key code" события с блоком **"key code of [ _ ]"** *(код клавиши [ _ ])*.
Если вы должны проверить, была ли какая-то клавиша нажата, полный список кодов клавиши можете найти [здесь](https://raw.githubusercontent.com/Stencyl/stencyl-engine/master/com/stencyl/Key.hx).

### Мини-Задача: Определите Ошибку
Есть маленькая ошибка в нашем примере кода. Вы можете ее найти?

<div class="note">
**Подсказка:** Что произойдет, если у текстового атрибута дудет 0 символов?
</div>

### Мини-Задача: Создайте Текстовое Поле для имени игрока
- Когда игрок щелкнет по текстовому полю, ожидайте ввода данных пользователем.
- Сохраните ввод в текстовом атрибуте.
- Выведите текст, который ввел игрок.
- Когда клавиша Enter будет нажата, прекратите ожидать ввода.
- Дополнительная Задача: Покажите мерцающий курсор, когда фокус будет на текстовом поле.

## Итог

- Обнаружение событий клавиш путем создания абстрактных элементов управления и проверки состояния этих элементов управления.
- Элементы Управление позволят вам изменить схему управления для вашей игры в одном месте.

## Задача: Кнопка

Создайте кнопку, которая отвечает на управление Мышью, но работает интереснее простого "когда нажато, сделайте что-то".

Кнопка должна работать точно так же, как обычная кнопка. В частности не регистрируйте нажатие кнопки, если жест не был и начат, и завершен на кнопке.

<div class="note">
**Пища для размышления:** Подумайте о вариантах, где просто обнаружение отпускания было бы неправильным.
</div>

## Задача: Кат-Сцена

Есть изящный блок для симуляции нажатия и отпускания клавиш. Это полезно для создания экранных кнопок в играх для мобильных устройств, которые могут работать, как будто они физические кнопки клавиатуры.

![](http://static.stencyl.com/pedia2/ch3/controls/image03.png)

Это также полезно для создания кат-сцен. **Сделайте кат-сцену, использующую этот блок.**
