Как мы описали в секции Основ Сцены, сцены управляют ходом игры и могут считаться различными стадиями в игре, между которыми вы переходите, как в истории.

Изображение

Как Сделать Смену Сцен

Смена Сцены включает 3 стадии.

Что нужно сцене, чтобы сменит на следующую (или перезапустить эту)
Переход Выхода
Переход Входа

Используйте следующие блоки (Scene > Game Flow) (Сцена > Ход Игры), чтобы выполнить смену сцены.

Изображение

Если это не очевидно, то reload - перезагрузка этой же сцены


Глюки

1) Сопротивляйтесь искушению выполнить переход за 0 секунд. Вместо этого, для стабильности, возьмите низкое число, такой как 0.01.

2) Вы не можете выполнить несколько смен сцены одновременно. Как только начнет происходить смена сцены, оно должно достигнуть завершения, прежде чем будет начата другая смена сцены. Любые новые запросы об смене сцены будут проигнорированы.

Переходы

Stencyl поддерживает 7 различных видов переходов для смены сцены. Переходы - применение визуальных эффектов.

Fade (Исчезновение)
Blinds (Жалюзи)
Bubbles (Пузыри)
Spotlight (Высвечивание)
Blur (Размытие)
Box (Квадраты)
Crossfade (Перетекание)

Вы можете предварительно просмотреть все эти переходы в следующем демо.

Изображение


Пример: Вход в Дверь, Переключение Сцены

В этом простом примере мы заставим героя войти в пещеру, как только он ступит в дверь пещеры, представленную Регионом.

Я решил использовать событие “Actor Type Enters Region” (Тип Актера, Входит в Регион) и поместил регион над дверью, чтобы зафиксировать вход.

Изображение


Пример: Выбор Уровня

Построение экрана выбора уровня является общей задачей для многих игр. Вот простой и элегантный способ сделать это всего за пару блоков.

Изображение

Скачать Проект

- Разархивируйте и перенесите проект в свою папку Games как "Level Selector Demo"

- Не знайте, где ваша папка Games? Нажмите кнопку "View Games Directory" внизу Welcome Center (первый экран, который вы видите открывая Stencyl)

Изображение


Концепция
Чтобы осуществить это, я буду использовать блок “get scene with name” (получить сцену с именем) (Scene > World) (Сцена > Мир). Этот блок выводит сцену учитывая имя.

Изображение


Теперь, я могу вставить этот блок в наш обычный блок переключения сцены. Вы же знали, что так можно сделать, не так ли?

Изображение


Наша цель состоит в том, чтобы сделать простое поведение, которое мы сможем использовать. Чтобы осуществить чистый Выбор Уровня, у наших сцен должна быть предсказуемая схема обозначения. Как насчет того, что мы просто дадим каждому уровню числовое имя, начиная с 1?

Изображение


Если мы это сделаем, можем вставить Числовой Атрибут в блок “get scene with name”, и он волшебным образом будет переключаться на сцену с этим «именем».

Изображение


Внедрение: Создание Кнопок
Соединим все это вместе в поведение, которое создает 5 кнопок выбора Уровня в ряд, на расстоянии 100 пикселей друг от друга.
Мини-Задача: Вы должны сделать так, чтобы это поведение начинало новый ряд после добавления шестой кнопки)

Изображение

Примечание: Блок "for Last Created Actor, set ..." (для Последнего Созданного Актера, установить ...) - специальный блок, который устанавливает значение атрибута в различных поведениях.

В этом случае мы эффективно говорим блоку, с какой Сценой он связан, иначе он не знал бы, на какую Сцену переключиться и что потянуть.

Мы создали отдельную статью, чтобы узнать о настройке (и получении) значения атрибутов за пределами их собственного поведения.


Внедрение: Логика Кнопок
Каждая кнопка Выбора Уровня содержит 2 События и единственный Атрибут Числа (названный “SceneNumber”, который говорит кнопке, какую сцену она должна представлять в Выборе Уровня).

1) Одно событие, которое отображает кнопку.

Изображение


2) Одно событие, которое переключает сцену, когда нажимается кнопка.

Изображение


Вот и все! Если вы хотите далее играть с этим примером, загрузите его выше.

Итог

Сцены - стадии игры.
Смена сцен включает в себя переход выхода и переход входа.
Вы можете выполнять только одну смену сцены одновременно.

Задача: Позиция Актера в "Следующей" Сцене

В Зелде, когда Линк выходит через край комнаты, он естественно появляется в “правильном” месте в следующей комнате.

Например, если он выйдет через правую сторону комнаты, то обычно он появляться с левой стороны следующей комнаты.




Это оказывается сложно, ведь вы должны изменять позицию героя, основываясь на том откуда он пришел.
К счастью есть блок, который может вас выручить. (Scene > Game Flow) (Сцена > Ход Игры)

Изображение


Используйте этот блок для реализации общей, надежной системы для размещения актер в "правильном" месте, как это делается в игре Zelda.
